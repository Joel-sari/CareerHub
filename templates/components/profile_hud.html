{% load static %}

<div id="profile-hud"
     class="hidden absolute right-0 top-full mt-2 w-80 bg-white border border-[#2b3853]/50
            rounded-xl shadow-lg p-5 z-50">

  <!-- User Info -->
  <div class="flex items-center gap-4 mb-4">

    <!-- Profile Picture -->
    <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-[#efce63] bg-gray-200">
      {% if user.is_authenticated and user.role == "job_seeker" and user.jobseeker and user.jobseeker.profile_picture %}
        <img src="{{ user.jobseeker.profile_picture.url }}"
             alt="Profile Picture"
             class="w-full h-full object-cover"/>
      {% else %}
        <img src="{% static 'images/icon_profile.png' %}"
             alt="Default Picture"
             class="w-full h-full object-cover"/>
      {% endif %}
    </div>

    <!-- Name block -->
    <div class="flex flex-col leading-tight">

      <!-- Full Name -->
      <p class="font-bold text-base text-[#233250]">
        {{ user.jobseeker.full_name|default:user.username }}
      </p>

      <!-- Username (always visible) -->
      <p class="text-sm text-gray-500 -mt-0.5">@{{ user.username }}</p>

      <!-- Email -->
      <p class="text-sm text-gray-600">{{ user.email }}</p>

    </div>

  </div>

  <hr class="my-3 border-gray-300/40">

  <!-- Role-based Links -->
  <ul class="space-y-2">
    {% if user.role == 'job_seeker' %}
      <li>
        <a href="{% url 'jobseeker_onboarding' %}"
           class="block font-medium text-[#233250] hover:text-[#42547b] transition-colors">
          Edit Profile
        </a>
      </li>
      <li>
        <a href="{% url 'jobs:job_list' %}"
           class="block font-medium text-[#233250] hover:text-[#42547b] transition-colors">
          View Jobs
        </a>
      </li>
    {% elif user.role == 'recruiter' %}
      <li>
        <a href="{% url 'recruiter_onboarding' %}"
           class="block font-medium text-[#233250] hover:text-[#42547b] transition-colors">
          Edit Profile
        </a>
      </li>
      <li>
        <a href="{% url 'jobs:my_list' %}"
           class="block font-medium text-[#233250] hover:text-[#42547b] transition-colors">
          My Job Listings
        </a>
      </li>
    {% endif %}
  </ul>

  <hr class="my-3 border-gray-300/40">

  <!-- Logout -->
  <form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit"
            class="block w-full text-left text-red-600 font-semibold hover:text-black-700 transition-colors">
      Log Out
    </button>
  </form>

</div>
