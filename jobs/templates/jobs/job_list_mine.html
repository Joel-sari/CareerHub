{% extends "base.html" %}
{% block content %}

<!-- ================= HEADER ================= -->
<div class="flex items-center justify-between mb-8">
  <h2 class="text-3xl font-semibold text-[#243251]">
    Available Jobs
  </h2>
</div>

<!-- ================= JOB LIST ================= -->
{% if jobs %}
  <ul class="space-y-6">
    {% for job in jobs %}
      <li class="p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition">
        <h4 class="text-xl font-semibold text-[#243251]">{{ job.title }}</h4>
        <p class="text-gray-700"><strong>{{ job.company }}</strong> — {{ job.location }}</p>
        <p class="text-gray-500 mt-2">{{ job.description|truncatewords:25 }}</p>

        <div class="mt-4 flex items-center gap-3">
          <a href="{% url 'jobs:job_detail' job.pk %}"
             class="inline-block bg-[#42547c] text-white px-4 py-1.5 rounded-full text-sm hover:bg-[#2b3853] transition">
            View Details
          </a>

          {% if user.is_authenticated and user.role == 'job_seeker' %}
            {% if job.applied %}
              <span class="text-gray-500 text-sm">✓ Already Applied</span>
            {% else %}
              <a href="{% url 'jobs:apply_job' job.pk %}"
                 class="inline-block bg-[#efce63] text-[#243251] px-4 py-1.5 rounded-full text-sm font-medium hover:bg-[#d4b94a] transition">
                Apply
              </a>
            {% endif %}
          {% endif %}
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-gray-500 mt-6">No available jobs right now.</p>
{% endif %}
{% if user.is_authenticated and user.role == 'recruiter' %}
  <div class="flex justify-end mt-10">
    <a href="{% url 'jobs:create' %}"
       class="bg-[#efce63] text-[#243251] px-6 py-2 rounded-full font-semibold text-lg hover:bg-[#d4b94a] transition shadow-sm">
      + Create Job Listing
    </a>
  </div>
{% endif %}

{% endblock %}
