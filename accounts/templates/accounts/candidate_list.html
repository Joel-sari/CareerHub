{% extends "base.html" %}
{% block content %}

<div class="min-h-screen bg-white px-10 py-10">
  <div class="max-w-[1200px] mx-auto">
    <h2 class="text-3xl font-semibold text-[#243251] mb-8">Candidate Directory</h2>

    <!-- FILTER FORM -->
    <form method="get" class="mb-8 bg-gray-50 p-6 rounded-2xl border border-gray-200 shadow-sm">
      <div class="flex flex-wrap items-center gap-4">
        <input type="text" name="name" value="{{ request.GET.name }}"
               placeholder="Name"
               class="border border-gray-300 rounded-full px-4 py-2 w-36 focus:ring-2 focus:ring-[#42547c] outline-none">
        <input type="text" name="skills" value="{{ request.GET.skills }}"
               placeholder="Skills"
               class="border border-gray-300 rounded-full px-4 py-2 w-36 focus:ring-2 focus:ring-[#42547c] outline-none">
        <input type="text" name="education" value="{{ request.GET.education }}"
               placeholder="Education"
               class="border border-gray-300 rounded-full px-4 py-2 w-40 focus:ring-2 focus:ring-[#42547c] outline-none">
        <input type="text" name="location" value="{{ request.GET.location }}"
               placeholder="Location"
               class="border border-gray-300 rounded-full px-4 py-2 w-44 focus:ring-2 focus:ring-[#42547c] outline-none">

        <button type="submit" class="btn-primary text-[16px] px-8 py-2">
          🔍 Search
        </button>
      </div>
    </form>

    <!-- RESULTS -->
    {% if candidates %}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for candidate in candidates %}
          <a href="{% url 'candidate_profile' candidate.user.id %}"
             class="block bg-white border border-gray-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <h3 class="text-xl font-semibold text-[#243251]">{{ candidate.user.username }}</h3>
            {% if candidate.headline %}
              <p class="text-gray-600 text-sm mb-2">{{ candidate.headline }}</p>
            {% endif %}
            <p class="text-gray-500 text-sm">
              {{ candidate.city|default:"" }},
              {{ candidate.state|default:"" }},
              {{ candidate.country|default:"" }}
            </p>
            <p class="text-gray-400 text-sm mt-1">
              {{ candidate.skills|truncatewords:10 }}
            </p>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-500 mt-4 text-center">No public candidates match your filters.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
